# 빅데이터 파일럿 프로젝트

## 파일럿 프로젝트 도메인
 
### 요구사항 파악

- 요구사항 1
    - 차량의 다양한 장치로부터 발생하는 로그 파일을 수집해서 기능별 상태를 점검한다.


- 요구사항 2
    - 운전자의 운행 정보가 담긴 로그를 실시간으로 수집해서 주행 패턴을 분석한다.


- 요구사항 파악

![Cap 2021-07-18 13-57-31-822](https://user-images.githubusercontent.com/76901290/126056453-c6e651b2-c126-4607-9c01-38ff17709044.jpg)


- 데이터셋

![Cap 2021-07-18 14-04-01-139](https://user-images.githubusercontent.com/76901290/126056486-c3d374b8-d107-467d-b425-5c5aa59f3b5a.png)


1. 스마트카 상태 정보 데이터

- 스마트카의 각종 센서로부터 발생하는 차량의 상태 정보 데이터셋이다.
- 요구사항 1과 직접적인 관련이 있으며, 로그 시뮬레이터를 통해 생성된다.

2. 스마트카 운전자 운행 데이터

- 스마트카 운전자의 운전 패턴/운행 정보가 담긴 데이터셋이다.
- 요구사항 2와 직접적인 관련이 있으며 로그 시뮬레이터를 통해 생성된다.

3. 스마트카 마스터 데이터

- 스마트카 운전자의 프로파일 정보가 담긴 데이터셋이다.
- 요구사항 1, 2와 관련된 분석 데이터셋을 만들 때 활용한다.
- 이미 만들어진 샘플 파일을 이용한다.

4. 스마트카 물품 구매 이력 데이터

- 스마트카 운전자가 차량 내의 스마트 스크린을 통해 쇼핑몰에서 구입한 차량 물품 구매 목록 데이터셋이다.
- 요구사항 1,2와 관련된 분석 데이터셋을 만들 때 활용하는데, 이미 만들어진 샘플 파일을 이용한다.


## 소프트웨어 아키텍처

![Cap 2021-07-18 14-15-22-965](https://user-images.githubusercontent.com/76901290/126056671-7bf478aa-c66b-4d7b-84f5-4fbe28957ccf.jpg)

### 수집 레이어

![Cap 2021-07-18 14-15-56-489](https://user-images.githubusercontent.com/76901290/126056730-7cf6595f-e8cc-459a-8941-3f6e34569187.jpg)

### 적재 레이어

![Cap 2021-07-18 14-16-15-788](https://user-images.githubusercontent.com/76901290/126056739-baf833f8-82cb-482a-a3e6-c60335ad9ead.jpg)

### 처리/탐색 레이어

![Cap 2021-07-18 14-21-41-888](https://user-images.githubusercontent.com/76901290/126056744-1de8398e-9ecb-4d70-9ca4-127aec8bbf43.jpg)

### 분석/응용 레이어

![Cap 2021-07-18 14-16-49-706](https://user-images.githubusercontent.com/76901290/126056752-7f194628-4d2c-43f2-8075-77b73fb2a85b.jpg)



## 하드웨어 아키텍처

- 3V 관점의 빅데이터 하드웨어 아키텍처 수립
  - Volume   : 얼마나 많은 데이터가 발생하는가?
  - Velocity : 얼마나 자주 데이터가 발생하는가?
  - Variety  : 얼마나 다양한 데이터가 발생하는가?


### 파일럿 PC 구성도

![Cap 2021-07-18 14-25-35-059](https://user-images.githubusercontent.com/76901290/126056804-b0f83b0a-e9c2-44f8-ad7f-671bbb93bcd9.jpg)


### 프로젝트 구축 환경

![Cap 2021-07-18 14-27-51-839](https://user-images.githubusercontent.com/76901290/126056814-a5099404-3291-43af-9980-a0a8cbfdf054.jpg)



## 파일럿 프로젝트 환경 구성

1. 파일럿 프로젝트 도메인의 이해

- 파일럿 프로젝트의 기본 도메인을 이해하고, 이와 관련된 빅데이터 요구사항을 도출 및 분석
   
2. 빅데이터 파일럿 아키텍처 이해

- 스마트카의 빅데이터 분석을 위한 소프트웨어/하드웨어 아키텍처를 이해
   
3. 빅데이터 파일럿 프로젝트용 PC 환경 구성

- 파일럿 프로젝트 환경을 구성하기 위해 PC에서 사용할 기본 소프트웨어를 설치하고 구성
- 이 과정에서 자바, 이클립스, 오라클 버추얼 박스 등을 설치

4. 빅데이터 파일럿 프로젝트용 PC 서버 구성

- 2개의 가상 머신을 생성하고, 분산 클러스터 환경을 구성하기 위한 2대의 리눅스 서버(CentOS)를 설치 및 구성

5. CM(Cloudera Manager) 설치

- 빅데이터 소프트웨어를 설치/관리하는 Cloudera Manager를 설치
- CM을 이용해 빅데이터 파일럿 프로젝트의 기본 소프트웨어인 하둡, 주키퍼를 설치

6. 스마트카 로그 시뮬레이터 설치

- 스마트카의 상태 정보와 운행 정보를 시물레이션 해 로그 데이터를 생성하는 자바 프로그램을 설치

7. 파일럿 환경 관리

- 파일럿 환경 시작 순서

1. 버추얼 박스를 실행하면 가상 머신 관리자 창이 활성화된다.

2. 왼쪽의 가상 머신 목록에서 Server01, Server02를 순서대로 시작한다.

3. 2개의 가상 머신 창이 활성화되고, CentOS가 구동된다.

4. PuTTY로 Server01에 SSH 접속해서 CM이 구동 완료됐는지 확인한다.

- $ service cloudera-scm-server status
- 개발용 PC 사양에 따라 이 과정에 수 분이 소요될 수 있다. "cloudera-scm-server is running"라는 메세지가 출력되면 다음 단계를 진행한다.

5. 크롬 브라우저를 실행하고 CM 관리자 화면에 접속한다.

6. CM의 홈 화면 왼쪽 메뉴 그룹 가운데 [Cluster1]의 콤보박스를 선택하고 [재시작] 메뉴를 선택한다.
   Cluster1에 설치돼 있는 HDFS, 주키퍼, 카프카, YARN 등의 소프트웨어들은 서로 의존 관계를 맺고 있다.
   예를 들면, HDFS를 사용하려면 주키퍼가 먼저 실행되고 있어야 하고, YARN을 사용하려면 HDFS가 먼저
   실행되고 있어야 한다. Cluster1의 하위 소프트웨어들은 각각 재시작할 때는 이러한 의존관계를 잘 고려해야 한다.
   Cluster1 전체를 재시작하면 CM이 알아서 의존성에 따라 모든 소프트웨어들을 재기동하게 된다.
   
7. CM의 홈 화면에서 왼쪽 메뉴 그룹 중 [Cloudera Management Service]의 콤보박스를 선택하고 [재시작] 메뉴를 선택한다.

8. Cluster1과 Cloudera Management Service의 모든 메뉴들의 상태 아이콘이 활성화되면 재시작이 완료된 것이다.
   이번 역시 PC 사양에 따라 수 분의 시간이 소요될 수 있으며, 빨간색으로 불량 상태가 표시됐어도 서비스 중지 상태가 아니라면
   무시하고 넘어간다. 이로써 개발 환경 시작을 완료.

- 파일럿 환경 종료 순서

1. 개발 환경 시작의 역순으로 하면 된다. 먼저 CM의 홈에서 Cluster1을 중지시키고, 클라우데라 관리 서비스도 중지시킨다.

2. Server01, Server02 서버에 각각 PuTTY로 접속해서 시스템 종료 명령을 실행한다.
- $halt
- halt 명령으로 셧다운이 안되는 경우 곧바로 3번 절차로 넘어간다.

3. 버추얼 박스의 가상 머신 목록에서 Server01,Server02를 모두 전원 끄기로 종료시킨다.

4. 버추얼 박스 관리자를 닫으면 개발 환경이 종료된다.








### 출처

"15일간의 빅데이터 파일럿 프로젝트",인프런,https://www.inflearn.com/course/%EB%B9%85%EB%8D%B0%EC%9D%B4%ED%84%B0-%ED%8C%8C%EC%9D%BC%EB%9F%BF-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8/dashboard